require 'erb'
require 'net/http'
require 'pry'
require 'json'

class Index

	def call env
	 ## @var = "Alberto"
	 ## ['200', {'Content-Type' => 'text/html'}, [erb("index.html.erb")]]
	
      uri = URI('http://api.ratings.food.gov.uk/Regions/basic')
      params = { 'accept' => 'application/json', 
      			'content-type' => 'application/json', 
      			'x-api-version' => '2',
      			 'content-length' => '1964' }

	res = Net::HTTP::Get.new(uri, params)
       
      response = JSON.parse res.body 
      
	binding.pry
	  ['200', {'Content-Type' => 'text/html'}, ['great']]
	end

	def erb template
	  path = File.expand_path("views/#{template}")
	  ERB.new(File.read(path)).result(binding)
	end

end
